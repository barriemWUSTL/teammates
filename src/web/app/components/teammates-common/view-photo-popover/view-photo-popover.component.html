<ng-template #popContent>
  <img *ngIf="isPhotoShown; else viewPhotoBtn" class="profile-pic" src="{{photoUrl}}" (error)="missingPhotoEventHandler()">
</ng-template>

<span *ngIf="isViewPhotoLinkInPopover; else viewPhotoBtn" [ngbPopover]="popContent" triggers="mouseenter" closeDelay="0" [autoClose]="'outside'">
  <ng-content></ng-content>
</span>

<ng-template #viewPhotoBtn>
  <a *ngIf="!isPhotoShown" [routerLink]="" role="button" (click)="isPhotoShown=true; $event.stopPropagation();"
     queryParamsHandling="preserve">
    View Photo
  </a>
  <img *ngIf="!isViewPhotoLinkInPopover && isPhotoShown" class="profile-pic-icon" src="{{photoUrl}}" (error)="missingPhotoEventHandler()"
       [ngbPopover]="popContent" [autoClose]="'outside'" triggers="mouseenter" closeDelay="0"/>
</ng-template>
